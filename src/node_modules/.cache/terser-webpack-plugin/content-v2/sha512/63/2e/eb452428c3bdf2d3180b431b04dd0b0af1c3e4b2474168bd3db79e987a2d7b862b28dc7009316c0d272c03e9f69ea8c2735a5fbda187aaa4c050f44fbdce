{"map":{"version":3,"sources":["/js/clients/payments/stripe-credit-card.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","11","uALE","_document$querySelect","_document$querySelect2","_document$querySelect3","_document$querySelect4","_defineProperties","target","props","length","descriptor","configurable","writable","StripeCreditCard","token","secret","onlyAuthorization","instance","Constructor","TypeError","_classCallCheck","this","protoProps","staticProps","stripe","Stripe","elements","cardElement","mount","_this","payNowButton","document","getElementById","disabled","querySelector","classList","remove","add","handleCardPayment","payment_method","then","result","error","handleFailure","message","handleSuccess","_this2","cardHolderName","payment_method_data","billing_details","JSON","stringify","paymentIntent","tokenBillingCheckbox","checked","submit","errors","textContent","hidden","_this3","handleCardSetup","handleSuccessfulAuthorization","setupIntent","_this4","setupStripe","createElement","mountCardElement","addEventListener","handleAuthorization","completePaymentUsingToken","completePaymentWithoutToken","content","handle"],"mappings":"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"},"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/\",n(n.s=11)}({11:function(e,t,n){e.exports=n(\"uALE\")},uALE:function(e,t){var n,r,o,i;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.key=t,this.token=n,this.secret=r,this.onlyAuthorization=o}var t,n,r;return t=e,(n=[{key:\"setupStripe\",value:function(){return this.stripe=Stripe(this.key),this.elements=this.stripe.elements(),this}},{key:\"createElement\",value:function(){return this.cardElement=this.elements.create(\"card\"),this}},{key:\"mountCardElement\",value:function(){return this.cardElement.mount(\"#card-element\"),this}},{key:\"completePaymentUsingToken\",value:function(){var e=this,t=document.getElementById(\"pay-now-with-token\");this.payNowButton=t,this.payNowButton.disabled=!0,this.payNowButton.querySelector(\"svg\").classList.remove(\"hidden\"),this.payNowButton.querySelector(\"span\").classList.add(\"hidden\"),this.stripe.handleCardPayment(this.secret,{payment_method:this.token}).then((function(t){return t.error?e.handleFailure(t.error.message):e.handleSuccess(t)}))}},{key:\"completePaymentWithoutToken\",value:function(){var e=this,t=document.getElementById(\"pay-now\");this.payNowButton=t,this.payNowButton.disabled=!0,this.payNowButton.querySelector(\"svg\").classList.remove(\"hidden\"),this.payNowButton.querySelector(\"span\").classList.add(\"hidden\");var n=document.getElementById(\"cardholder-name\");this.stripe.handleCardPayment(this.secret,this.cardElement,{payment_method_data:{billing_details:{name:n.value}}}).then((function(t){return t.error?e.handleFailure(t.error.message):e.handleSuccess(t)}))}},{key:\"handleSuccess\",value:function(e){document.querySelector('input[name=\"gateway_response\"]').value=JSON.stringify(e.paymentIntent);var t=document.querySelector('input[name=\"token-billing-checkbox\"]');t&&(document.querySelector('input[name=\"store_card\"]').value=t.checked),document.getElementById(\"server-response\").submit()}},{key:\"handleFailure\",value:function(e){var t=document.getElementById(\"errors\");t.textContent=\"\",t.textContent=e,t.hidden=!1,this.payNowButton.disabled=!1,this.payNowButton.querySelector(\"svg\").classList.add(\"hidden\"),this.payNowButton.querySelector(\"span\").classList.remove(\"hidden\")}},{key:\"handleAuthorization\",value:function(){var e=this,t=document.getElementById(\"cardholder-name\"),n=document.getElementById(\"authorize-card\");this.payNowButton=n,this.payNowButton.disabled=!0,this.payNowButton.querySelector(\"svg\").classList.remove(\"hidden\"),this.payNowButton.querySelector(\"span\").classList.add(\"hidden\"),this.stripe.handleCardSetup(this.secret,this.cardElement,{payment_method_data:{billing_details:{name:t.value}}}).then((function(t){return t.error?e.handleFailure(t):e.handleSuccessfulAuthorization(t)}))}},{key:\"handleSuccessfulAuthorization\",value:function(e){document.getElementById(\"gateway_response\").value=JSON.stringify(e.setupIntent),document.getElementById(\"server_response\").submit()}},{key:\"handle\",value:function(){var e=this;this.setupStripe(),this.onlyAuthorization?(this.createElement().mountCardElement(),document.getElementById(\"authorize-card\").addEventListener(\"click\",(function(){return e.handleAuthorization()}))):(this.token&&document.getElementById(\"pay-now-with-token\").addEventListener(\"click\",(function(){return e.completePaymentUsingToken()})),this.token||(this.createElement().mountCardElement(),document.getElementById(\"pay-now\").addEventListener(\"click\",(function(){return e.completePaymentWithoutToken()}))))}}])&&a(t.prototype,n),r&&a(t,r),e}())(null!==(n=document.querySelector('meta[name=\"stripe-publishable-key\"]').content)&&void 0!==n?n:\"\",null!==(r=document.querySelector('meta[name=\"stripe-token\"]').content)&&void 0!==r?r:\"\",null!==(o=document.querySelector('meta[name=\"stripe-secret\"]').content)&&void 0!==o?o:\"\",null!==(i=document.querySelector('meta[name=\"only-authorization\"]').content)&&void 0!==i?i:\"\").handle()}});","extractedComments":["/**\n * Invoice Ninja (https://invoiceninja.com)\n *\n * @link https://github.com/invoiceninja/invoiceninja source repository\n *\n * @copyright Copyright (c) 2020. Invoice Ninja LLC (https://invoiceninja.com)\n *\n * @license https://opensource.org/licenses/AAL\n */"]}